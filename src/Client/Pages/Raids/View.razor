@page "/raids/{RaidId:long}"
@inject ApiClient Api

<ApiExecutor Operation="() => Api.Raids.Get(RaidId)" Context="raid" @ref="_executor" BackgroundRefresh="true">
    <h1>Team @raid.TeamName Raid</h1>
    <h3>Phase @raid.Phase</h3>
    <h3>@raid.StartedAt.ToLocalTime().ToString("f", CultureInfo.CurrentCulture)</h3>

    <AttendeesView Raid="raid" />
    <KillsView Raid="raid" />

    <div class="fab-container-fixed">
        <MudFabProgress Icon="@Icons.Material.Filled.Refresh"
                        Color="Color.Primary"
                        OnClick="() => _executor?.RestartAsync() ?? Task.CompletedTask" />
    </div>
</ApiExecutor>

@code {
    private IApiExecutor? _executor;

    [Parameter] public long RaidId { get; set; }
}
