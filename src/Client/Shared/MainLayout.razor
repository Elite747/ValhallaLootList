@inherits LayoutComponentBase
@inject RenderLocation Location

<MudThemeProvider Theme="DefaultMudTheme.Value" />
@if (!Location.IsServer)
{
    <MudDialogProvider FullWidth="true"
                       MaxWidth="MaxWidth.Small"
                       Position="DialogPosition.Center"
                       DisableBackdropClick="false"
                       CloseButton="true"
                       NoHeader="false" />
    <MudSnackbarProvider />
}

<MudLayout>
    <MudAppBar Elevation="5">
        <MudIconButton Icon="@Icons.Material.Filled.Menu" Color="Color.Inherit" Edge="Edge.Start" OnClick="() => _navOpen = !_navOpen" />
        <img src="/valhallatrans.png" width="48" height="48" alt="Valhalla" />
        <MudText Typo="Typo.h6" Class="ml-1 d-none d-sm-block">Valhalla</MudText>
        <MudAppBarSpacer />
        @if (Location.IsServer)
        {
            <MudIconButton Icon="@Icons.Material.Filled.Settings" Color="Color.Inherit" Disabled="true" />
        }
        else
        {
            <LoginDisplay />
            <SettingsDisplay />
        }
    </MudAppBar>
    <MudDrawer @bind-Open="@_navOpen" Elevation="5" ClipMode="DrawerClipMode.Docked" Variant="DrawerVariant.Responsive">
        <NavMenu />
    </MudDrawer>
    <MudMainContent Class="py-16 px-4">
        <MudContainer Class="mt-6">
            @if (Location.IsServer)
            {
                <MudProgressLinear Indeterminate="true" Color="Color.Primary" />
            }
            else
            {
                @Body
            }
        </MudContainer>
    </MudMainContent>
</MudLayout>

@code{
    private bool _navOpen = true;
}